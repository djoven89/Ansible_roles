<IfModule mod_ssl.c>

    <VirtualHost _default_:{{ site_port }}>
        DocumentRoot {{ site_dir }}/{{ site_domain }}
        ServerName {{ site_domain }}
        DirectoryIndex index.html index.php

        ErrorLog ${APACHE_LOG_DIR}/https-{{ site_name}}_error.log
        CustomLog ${APACHE_LOG_DIR}/https-{{ site_name }}_access.log combined

        ## SSL configuration
	    SSLEngine on
		SSLCertificateFile	{{ site_cert_file }}
		SSLCertificateKeyFile {{ site_cert_key }}

        <Directory "{{ site_dir }}/{{ site_domain }}/">
            Require all granted
        </Directory>

    </VirtualHost>

    ## Generated by: https://ssl-config.mozilla.org/#server=apache&server-version=2.4.39&config=intermediate
    Protocols h2 http/1.1
	SSLProtocol             all -SSLv3 -TLSv1 -TLSv1.1
	SSLCipherSuite          ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384
	SSLHonorCipherOrder     off
	SSLSessionTickets       off
	SSLUseStapling On
	SSLStaplingCache "shmcb:logs/ssl_stapling(32768)"

</IfModule>
